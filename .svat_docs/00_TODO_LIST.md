# プロジェクト TODO リスト (OpenCV版)

## フェーズ 1: プロジェクトの骨格構築 (完了)
-   [x] **1-1. フォルダ構成の作成**
-   [x] **1-2. 空のPythonファイルの作成**
-   [x] **1-3. クラスの雛形作成**

## フェーズ 2: 機能の実装とリファクタリング

-   [x] **2-1. 設定・定数管理機能の実装:**
    -   [x] `app/config.py`
    -   [x] `services/settings_service.py`
    -   [x] `services/preset_service.py`
-   [x] **2-2. UI(View)の分離:**
    -   [x] `app/main_window.py` にUI骨格を実装。
-   [x] **2-3. 分析機能の分離:**
    -   [x] `services/analysis_service.py` に記録ロジックを実装。

-   [ ] **2-4. (新規) 依存ライブラリの変更:**
    -   [ ] `opencv-python` と `ffpyplayer` をインストールする。
    -   [ ] (任意) `python-vlc` をアンインストールする。

-   [ ] **2-5. (新規) 動画再生機能の再実装 (OpenCV):**
    -   [ ] `services/video_player.py` をOpenCVベースで完全に書き換える。
        - [ ] 動画の読み込みとプロパティ取得 (FPS, フレーム数)。
        - [ ] 指定フレーム番号の画像を取得する機能 (`get_frame`)。
        - [ ] 再生状態（再生中/一時停止、現在のフレーム番号）を管理する機能。

-   [ ] **2-6. (新規) アプリロジックの再実装:**
    -   [ ] `app/app_logic.py` をOpenCVベースで完全に書き換える。
        - [ ] Tkinterの `after()` を使った再生ループを構築する。
        - [ ] `VideoPlayerService` からフレーム画像を取得し、`Pillow` を経由して `MainWindow` のLabelウィジェットに描画する。
        - [ ] タイムライン（Scaleウィジェット）と動画フレームを同期させる。
        - [ ] 再生/一時停止、シーク、速度変更のロジックを実装する。
        - [ ] UIの初期化と表示更新ロジックを安定化させる。

-   [ ] **2-7. (新規) 既存機能の再接続:**
    -   [ ] `AppLogic` と `AnalysisService`, `PresetService` を再接続し、UIイベント（ボタンクリック等）と連携させる。

## フェーズ 3: 改善項目の実装 (基本機能安定後)

-   [ ] **3-1. ショートカット競合問題の解決**
-   [ ] **3-2. 複数動画の連続解析機能の実装**
-   [ ] **3-3. (新規) エクスポート機能の実装:**
    -   [ ] `services/export_service.py` を実装する。
    -   [ ] `AppLogic` に接続し、「Finish & Save」ボタンの機能を実装する。

## フェーズ 4: 最終調整とテスト

-   [ ] **4-1. 動作確認とデバッグ**
-   [ ] **4-2. コードのクリーンアップ**